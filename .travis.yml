sudo: required
addons:
  chrome: stable
language: node_js
node_js:
- node
script:
- npm run test-ci
- npm run build-ci
before_install:
- pip install --user codecov
after_success:
- codecov --file coverage/lcov.info --disable search
before_deploy:
  - cd dist/rx-form-mapper
deploy:
  provider: npm
  email: iacopociao1992@gmail.com
  skip_cleanup: true
  api_key:
    secure: $NPM_TOKEN
  on:
    branch: master
    repo: KernelPanic92/rx-form-mapper
